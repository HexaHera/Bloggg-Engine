<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Announcing Rust 1.17 | Rust Blog</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="description" content="Empowering everyone to build reliable and efficient software.">
     <!-- Twitter card -->
     <meta name="twitter:card" content="summary">
     <meta name="twitter:site" content="@rustlang">
     <meta name="twitter:creator" content="@rustlang">
     <meta name="twitter:title" content="Announcing Rust 1.17 | Rust Blog">
     <meta name="twitter:description" content="Empowering everyone to build reliable and efficient software.">
    <meta name="twitter:image" content="https://www.rust-lang.org/static/images/rust-social.jpg">
    
    <!-- Facebook OpenGraph -->
    <meta property="og:title" content="Announcing Rust 1.17 | Rust Blog" />
    <meta property="og:description" content="Empowering everyone to build reliable and efficient software.">
    <meta property="og:image" content="https://www.rust-lang.org/static/images/rust-social-wide.jpg" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    
    <!-- styles -->
    <link rel="stylesheet" href="https://blog.rust-lang.org/styles/skeleton.css"/>
    <link rel="stylesheet" href="https://blog.rust-lang.org/styles/tachyons.css"/>
    <link rel="stylesheet" href="https://blog.rust-lang.org/styles/fonts.css"/>
    <link rel="stylesheet" href="https://blog.rust-lang.org/styles/app.css"/>
    <link rel="stylesheet" type="text/css" id="syntax-theme" />
    
    <!-- stylesheet for user agents without js -->
    <noscript>
        <link rel="stylesheet" href="https://blog.rust-lang.org/styles/noscript.css">
        <link rel="stylesheet" type="text/css" href="/styles/syntax-theme-dark.css" media="(prefers-color-scheme: dark)" />
        <link rel="stylesheet" type="text/css" href="/styles/syntax-theme-light.css" media="(prefers-color-scheme: light)" />
    </noscript>
    
    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://blog.rust-lang.org/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://blog.rust-lang.org/images/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://blog.rust-lang.org/images/favicon-32x32.png">
    <link rel="icon" type="image/svg+xml" href="https://blog.rust-lang.org/images/favicon.svg">
    <link rel="manifest" href="https://blog.rust-lang.org/images/site.webmanifest">
    <link rel="mask-icon" href="https://blog.rust-lang.org/images/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#ffffff">
    
     <!-- atom -->
     <link type="application/atom+xml" rel="alternate" href="https://blog.rust-lang.org/feed.xml" title="Rust Blog" />
    
    <!-- theme switcher -->
    <script src="https://blog.rust-lang.org/scripts/theme-switch.js"></script>
  </head>
  <body>
    <nav class="flex flex-row justify-center justify-end-l items-center flex-wrap ph2 pl3-ns pr4-ns">
      <div class="brand flex-auto w-100 w-auto-l self-start tc tl-l">
        <a href="https://blog.rust-lang.org/">
          <img class="v-mid ml0-l rust-logo" alt="Rust Logo" src="https://blog.rust-lang.org/images/rust-logo-blk.svg">
          <span class="dib ml1 ml0-l">Rust Blog</span>
        </a>
      </div>
    
      <ul class="nav list w-100 w-auto-l flex flex-none flex-row flex-wrap justify-center justify-end-l items-center pv2 ph0 ph4-ns">
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org">Rust</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/tools/install">Install</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/learn">Learn</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/tools">Tools</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/governance">Governance</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/community">Community</a></li>
        <button class="theme-icon" onclick="dropdown();">ðŸ–Œ
          <ul id="theme-choice">
            <li class="theme-item" onclick="changeThemeTo('light');">Light</li>
            <li class="theme-item" onclick="changeThemeTo('dark');">Dark</li>
            <li class="theme-item" onclick="changeThemeTo('system');">System</li>
          </ul>
        </button>
        <script src="https://blog.rust-lang.org/scripts/theme-switch-post.js"></script>
      </ul>
    </nav><section id="Announcing Rust 1.17" class="white">
  <div class="w-100 mw-none ph3 mw8-m mw8-l center f3">
    <header>
      <h2>Announcing Rust 1.17</h2>
      <div class="highlight mt2 mb3"></div>
    </header>

    <div class="publish-date-author">Apr. 27, 2017 &middot; The Rust Core Team
    
    </div>

    <div class="post">
      <p>The Rust team is happy to announce the latest version of Rust, 1.17.0. Rust is a
systems programming language focused on safety, speed, and concurrency.</p>
<p>If you have a previous version of Rust installed, getting Rust 1.17 is as easy as:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">$</span></span><span class="z-meta z-function-call z-arguments z-shell"> rustup update stable</span>
</span></code></pre>
<p>If you don't have it already, you can <a href="https://www.rust-lang.org/install.html">get <code>rustup</code></a> from the
appropriate page on our website, and check out the <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1170-2017-04-27">detailed release notes for
1.17.0</a> on GitHub.</p>
<h3 id="what-s-in-1-17-0-stable"><a class="anchor" href="#what-s-in-1-17-0-stable" aria-hidden="true"></a>
What's in 1.17.0 stable</h3>
<p>The story of Rust 1.17.0 is mostly one of small, quality of life improvements. For example,
<a href="https://github.com/rust-lang/rust/pull/39265">the <code>'static</code> lifetime is now assumed in statics and consts</a>. When writing a const or static like this:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">NAME</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;static</span> <span class="z-storage z-type z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Ferris<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">static</span> <span class="z-constant z-other z-rust">NAME</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;static</span> <span class="z-storage z-type z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Ferris<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Rust 1.17 will allow you to elide the <code>'static</code>, since that's the only lifetime that makes
sense:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">NAME</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-type z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Ferris<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">static</span> <span class="z-constant z-other z-rust">NAME</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-type z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Ferris<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>In some situations, this can remove lots of boilerplate:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> old
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">NAMES</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;static</span> <span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;static</span> <span class="z-storage z-type z-rust">str</span><span class="z-punctuation z-separator z-rust">;</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">2</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Ferris<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Bors<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> new
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">NAMES</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-type z-rust">str</span><span class="z-punctuation z-separator z-rust">;</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">2</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Ferris<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Bors<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Another similar improvement is "field init shorthand." Similar to ECMAScript 6,
which calls this "Object Literal Property Value Shorthand", duplication can be
removed when declaring structs, like this:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> definitions
</span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Point</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">x</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">i32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">y</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">i32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> x <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">5</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> y <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">6</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> old
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> p <span class="z-keyword z-operator z-assignment z-rust">=</span> Point <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    x<span class="z-punctuation z-separator z-rust">:</span> x<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    y<span class="z-punctuation z-separator z-rust">:</span> y<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> new
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> p <span class="z-keyword z-operator z-assignment z-rust">=</span> Point <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    x<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    y<span class="z-punctuation z-separator z-rust">,</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>That is, the <code>x, y</code> form will assume that its values are set to a variable
with the same name in its scope.</p>
<p>For another small quality of life improvement, it's common for new Rustaceans to
try to use <code>+</code> to add two <code>&amp;str</code>s together. This doesn't work, you can only add
<code>String + &amp;str</code>. As such, <a href="https://github.com/rust-lang/rust/pull/39116">a new error
message</a> was added to help users
who make this mistake:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> code
</span></span><span class="z-source z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>foo<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>bar<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> old
</span></span><span class="z-source z-rust">error<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-other z-rust">E0369</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> binary operation `<span class="z-keyword z-operator z-arithmetic z-rust">+</span>` cannot be applied to <span class="z-storage z-type z-type z-rust">type</span> `<span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;static</span> <span class="z-storage z-type z-rust">str</span>`
</span><span class="z-source z-rust"> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>anon<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">2</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-bitwise z-rust">|</span>
</span><span class="z-source z-rust"><span class="z-constant z-numeric z-integer z-decimal z-rust">2</span> <span class="z-keyword z-operator z-bitwise z-rust">|</span>     <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>foo<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>bar<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-bitwise z-rust">|</span>     <span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-bitwise z-rust">|</span>
</span><span class="z-source z-rust">note<span class="z-punctuation z-separator z-rust">:</span> an implementation of `<span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ops<span class="z-punctuation z-accessor z-rust">::</span></span>Add` might be missing <span class="z-keyword z-control z-rust">for</span> `<span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;static</span> <span class="z-storage z-type z-rust">str</span>`
</span><span class="z-source z-rust"> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>anon<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">2</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-bitwise z-rust">|</span>
</span><span class="z-source z-rust"><span class="z-constant z-numeric z-integer z-decimal z-rust">2</span> <span class="z-keyword z-operator z-bitwise z-rust">|</span>     <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>foo<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>bar<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-bitwise z-rust">|</span>     <span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> new
</span></span><span class="z-source z-rust">error<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-other z-rust">E0369</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">:</span> binary operation `<span class="z-keyword z-operator z-arithmetic z-rust">+</span>` cannot be applied to <span class="z-storage z-type z-type z-rust">type</span> `<span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;static</span> <span class="z-storage z-type z-rust">str</span>`
</span><span class="z-source z-rust"> <span class="z-keyword z-operator z-arithmetic z-rust">-</span><span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>anon<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">2</span><span class="z-punctuation z-separator z-rust">:</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-bitwise z-rust">|</span>
</span><span class="z-source z-rust"><span class="z-constant z-numeric z-integer z-decimal z-rust">2</span> <span class="z-keyword z-operator z-bitwise z-rust">|</span>     <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>foo<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>bar<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-bitwise z-rust">|</span>     <span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span><span class="z-keyword z-operator z-bitwise z-rust">^</span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-bitwise z-rust">|</span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-assignment z-rust">=</span> note<span class="z-punctuation z-separator z-rust">:</span> `<span class="z-keyword z-operator z-arithmetic z-rust">+</span>` can<span class="z-storage z-modifier z-lifetime z-rust">&#39;t</span> be used to concatenate two `<span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-type z-rust">str</span>` strings
</span><span class="z-source z-rust">help<span class="z-punctuation z-separator z-rust">:</span> <span class="z-support z-function z-rust">to_owned</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> can be used to create an owned `<span class="z-support z-type z-rust">String</span>` from a string
</span><span class="z-source z-rust">reference<span class="z-punctuation z-accessor z-dot z-rust">.</span> <span class="z-support z-type z-rust">String</span> concatenation appends the string on the right to the string on
</span><span class="z-source z-rust">the left and may require reallocation<span class="z-punctuation z-accessor z-dot z-rust">.</span> This requires ownership of the string on
</span><span class="z-source z-rust">the left<span class="z-punctuation z-accessor z-dot z-rust">.</span>
</span><span class="z-source z-rust">  <span class="z-keyword z-operator z-bitwise z-rust">|</span>     <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>foo<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_owned</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>bar<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span>
</span></code></pre>
<p>When using Cargo's build scripts, you must set the location of the script in your
<code>Cargo.toml</code>. However, the vast majority of people wrote <code>build = "build.rs"</code>, using
a <code>build.rs</code> file in the root of their project. <a href="https://github.com/rust-lang/cargo/pull/3664">This convention is now encoded
into Cargo</a>, and will be assumed if
<code>build.rs</code> exists. We've been warning about this change for the past few releases,
and you can use <code>build = false</code> to opt out.</p>
<p>This release marks <a href="https://github.com/rust-lang/rust/pull/39431">the removal</a>
of the old <code>Makefile</code> based build system. The new system, announced in Rust
1.15, is written in Rust and primarily uses Cargo to drive the build. It is now
mature enough to be the only build system.</p>
<p>As part of that change, packages from crates.io can now be used within Rust's
build system. The first one to be added was <a href="https://crates.io/crates/mdbook">mdBook</a>,
and <a href="https://github.com/rust-lang/rust/pull/39633">it's now being used</a> to render
our various book-like documentation:</p>
<ul>
<li><a href="https://doc.rust-lang.org/stable/book/">The book</a> (<a href="https://github.com/rust-lang/book">repo</a>)</li>
<li><a href="https://doc.rust-lang.org/stable/reference/">The reference</a> (<a href="https://github.com/rust-lang-nursery/reference">repo</a>)</li>
<li><a href="https://doc.rust-lang.org/stable/nomicon/">The nomicon</a> (<a href="https://github.com/rust-lang-nursery/nomicon">repo</a>)</li>
</ul>
<p>In addition, see those links to their respective repositories; they've been
moved out of tree. Also, we've added a fourth book, still in-tree: <a href="https://doc.rust-lang.org/stable/unstable-book/">The
Unstable Book</a>. This
provides an overview of unstable features by name, contains links to their
tracking issues, and may contain initial documentation.
If there's a feature you want to see stabilized, please get involved on
its tracking issue!</p>
<p>A few releases ago, <code>rustup</code> stopped installing documentation
by default. We made this change to save some bandwidth and because not
all users want a copy of the documentation locally. However, this created
a pitfall: some users did not realize that this changed, and would only
notice once they were no longer connected to the internet. In addition,
some users <em>did</em> want to have a local copy of the docs, regardless of
their connectivity. As such, we've <a href="https://github.com/rust-lang/rust/pull/40526">reverted the change</a>, and documentation is being
installed by default again.</p>
<p>Finally, while this release is full of improvements, there is one small
step back we want to regretfully inform you about. On Windows, Visual
Studio 2017 has been released, and Microsoft has changed the structure
of how the software is installed. <a href="https://github.com/rust-lang/rust/issues/38584">Rust cannot automatically detect this
location</a>, and while we
were working on the neccesary changes, they did not make it in time for
this release. Until then, Visual Studio 2015 still works fine, or you
can run <code>vcvars.bat</code> on the command line. We hope to make this work
in a seamless fashion soon.</p>
<p>See the <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1170-2017-04-27">detailed release notes</a> for more.</p>
<h4 id="library-stabilizations"><a class="anchor" href="#library-stabilizations" aria-hidden="true"></a>
Library stabilizations</h4>
<p>19 new bits of API were stabilized this release:</p>
<ul>
<li><a href="https://doc.rust-lang.org/std/sync/struct.Arc.html#method.into_raw"><code>Arc::into_raw</code></a> and <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html#method.into_raw"><code>Rc::into_raw</code></a> let you consume an <code>Arc</code> or <code>Rc</code> and get a raw pointer.</li>
<li><a href="https://doc.rust-lang.org/std/sync/struct.Arc.html#method.from_raw"><code>Arc::from_raw</code></a> and <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html#method.from_raw"><code>Rc::from_raw</code></a> let you take that raw pointer and get an <code>Arc</code> or <code>Rc</code>.</li>
<li><a href="https://doc.rust-lang.org/std/sync/struct.Arc.html#method.ptr_eq"><code>Arc::ptr_eq</code></a> and <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html#method.ptr_eq"><code>Rc::ptr_eq</code></a> return true if the two <code>Arc</code>s or two <code>Rc</code>s point to the same value (not just values that compare as equal).</li>
<li><a href="https://doc.rust-lang.org/std/cmp/enum.Ordering.html#method.then"><code>Ordering::then</code></a> lets you chain two <code>Ordering</code>s together, and <a href="https://doc.rust-lang.org/std/cmp/enum.Ordering.html#method.then_with"><code>Ordering::then_with</code></a> lets you do it with a function.</li>
<li><a href="https://doc.rust-lang.org/std/collections/btree_map/struct.BTreeMap.html#method.range"><code>BTreeMap::range</code></a> allows you to iterate over a portion of a <code>BTreeMap</code>, and <a href="https://doc.rust-lang.org/std/collections/btree_map/struct.BTreeMap.html#method.range_mut"><code>BTreeMap::range_mut</code></a> lets you do it mutably. <a href="https://doc.rust-lang.org/std/collections/enum.Bound.html"><code>collections::Bound</code></a> can give you even more control.</li>
<li><a href="https://doc.rust-lang.org/std/process/fn.abort.html"><code>process::abort</code></a> will completely terminate a process in an abnormal fashion.</li>
<li><a href="https://doc.rust-lang.org/std/ptr/fn.read_unaligned.html"><code>ptr::read_unaligned</code></a> and <a href="https://doc.rust-lang.org/std/ptr/fn.write_unaligned.html"><code>ptr::write_unaligned</code></a> are like <code>ptr::read</code> and <code>ptr::write</code>, but without alignment requirements.</li>
<li><a href="https://doc.rust-lang.org/std/result/enum.Result.html#method.expect_err"><code>Result::expect_err</code></a> mirrors <code>Result::expect</code>, but with the <code>Err</code> case rather than the <code>Ok</code> case.</li>
<li><a href="https://doc.rust-lang.org/std/cell/struct.Cell.html#method.swap"><code>Cell::swap</code></a> is similar to <code>std::mem::swap</code>, but lets you do it with <code>&amp;Cell</code> instead of <code>&amp;mut T</code>.</li>
<li><a href="https://doc.rust-lang.org/std/cell/struct.Cell.html#method.replace"><code>Cell::replace</code></a> is similar to <code>std::mem::replace</code>, but lets you do it with <code>&amp;Cell</code> instead of <code>&amp;mut T</code>.</li>
<li><a href="https://doc.rust-lang.org/std/cell/struct.Cell.html#method.into_inner"><code>Cell::into_inner</code></a> lets you consume the <code>Cell</code>, and extract its value.</li>
<li><a href="https://doc.rust-lang.org/std/cell/struct.Cell.html#method.take"><code>Cell::take</code></a> lets you take the value out of a <code>Cell</code>, leaving its <code>Default::default</code> behind.</li>
</ul>
<p>In other changes, <code>Cell&lt;T&gt;</code> used to require that <code>T: Copy</code> for many of its methods,
but <a href="https://github.com/rust-lang/rust/pull/39793">this has been relaxed significantly</a>.</p>
<p><code>Box&lt;T&gt;</code> <a href="https://github.com/rust-lang/rust/pull/40009">now implements</a> over a dozen new
conversions with <code>From</code>.</p>
<p><code>SocketAddr</code> and <code>IpAddr</code> have <a href="https://github.com/rust-lang/rust/pull/39372">some new conversions</a>
as well. Previously, you may have written code like this:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>127.0.0.1:3000<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">parse</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">unwrap</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>Now, you can write</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-path z-rust">SocketAddr<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">127</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">3000</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> or even
</span></span><span class="z-source z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-constant z-numeric z-integer z-decimal z-rust">127</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">3000</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">into</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></code></pre>
<p>This removes some unnecessary run-time parsing, and is roughly as readable, depending on
your preferences.</p>
<p>Backtraces <a href="https://github.com/rust-lang/rust/pull/38165">now have nicer formatting</a>, eliding
some things by default. For example, the full backtrace:</p>
<pre class="z-code"><code><span class="z-text z-plain">thread &#39;main&#39; panicked at &#39;explicit panic&#39;, foo.rs:2
</span><span class="z-text z-plain">stack backtrace:
</span><span class="z-text z-plain">   1:     0x55c39a23372c - std::sys::imp::backtrace::tracing::imp::write::hf33ae72d0baa11ed
</span><span class="z-text z-plain">                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42
</span><span class="z-text z-plain">   2:     0x55c39a23571e - std::panicking::default_hook::{{closure}}::h59672b733cc6a455
</span><span class="z-text z-plain">                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libstd/panicking.rs:351
</span><span class="z-text z-plain">   3:     0x55c39a235324 - std::panicking::default_hook::h1670459d2f3f8843
</span><span class="z-text z-plain">                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libstd/panicking.rs:367
</span><span class="z-text z-plain">   4:     0x55c39a235afb - std::panicking::rust_panic_with_hook::hcf0ddb069e7beee7
</span><span class="z-text z-plain">                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libstd/panicking.rs:555
</span><span class="z-text z-plain">   5:     0x55c39a22e866 - std::panicking::begin_panic::heb433e9aa28a7408
</span><span class="z-text z-plain">   6:     0x55c39a22e9bf - foo::main::hd216d4a160fcce19
</span><span class="z-text z-plain">   7:     0x55c39a23d44a - __rust_maybe_catch_panic
</span><span class="z-text z-plain">                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libpanic_unwind/lib.rs:98
</span><span class="z-text z-plain">   8:     0x55c39a236006 - std::rt::lang_start::hd7c880a37a646e81
</span><span class="z-text z-plain">                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libstd/panicking.rs:436
</span><span class="z-text z-plain">                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libstd/panic.rs:361
</span><span class="z-text z-plain">                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libstd/rt.rs:57
</span><span class="z-text z-plain">   9:     0x55c39a22e9e9 - main
</span><span class="z-text z-plain">  10:     0x7f5e5ed3382f - __libc_start_main
</span><span class="z-text z-plain">  11:     0x55c39a22e6b8 - _start
</span><span class="z-text z-plain">  12:                0x0 - &lt;unknown&gt;
</span></code></pre>
<p>is now instead</p>
<pre class="z-code"><code><span class="z-text z-plain">thread &#39;main&#39; panicked at &#39;explicit panic&#39;, foo.rs:2
</span><span class="z-text z-plain">stack backtrace:
</span><span class="z-text z-plain">   0: std::sys::imp::backtrace::tracing::imp::unwind_backtrace
</span><span class="z-text z-plain">             at /checkout/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:49
</span><span class="z-text z-plain">   1: std::sys_common::backtrace::_print
</span><span class="z-text z-plain">             at /checkout/src/libstd/sys_common/backtrace.rs:71
</span><span class="z-text z-plain">   2: std::panicking::default_hook::{{closure}}
</span><span class="z-text z-plain">             at /checkout/src/libstd/sys_common/backtrace.rs:60
</span><span class="z-text z-plain">             at /checkout/src/libstd/panicking.rs:355
</span><span class="z-text z-plain">   3: std::panicking::default_hook
</span><span class="z-text z-plain">             at /checkout/src/libstd/panicking.rs:371
</span><span class="z-text z-plain">   4: std::panicking::rust_panic_with_hook
</span><span class="z-text z-plain">             at /checkout/src/libstd/panicking.rs:549
</span><span class="z-text z-plain">   5: std::panicking::begin_panic
</span><span class="z-text z-plain">   6: foo::main
</span><span class="z-text z-plain">   7: __rust_maybe_catch_panic
</span><span class="z-text z-plain">             at /checkout/src/libpanic_unwind/lib.rs:98
</span><span class="z-text z-plain">   8: std::rt::lang_start
</span><span class="z-text z-plain">             at /checkout/src/libstd/panicking.rs:433
</span><span class="z-text z-plain">             at /checkout/src/libstd/panic.rs:361
</span><span class="z-text z-plain">             at /checkout/src/libstd/rt.rs:57
</span><span class="z-text z-plain">   9: main
</span><span class="z-text z-plain">  10: __libc_start_main
</span><span class="z-text z-plain">  11: _start
</span></code></pre>
<p>By default. You can set the environment variable <code>RUST_BACKTRACE=full</code> to get the full
backtrace. We may be able to do more cleanup in the future; see <a href="https://github.com/rust-lang/rust/pull/40264">this bug</a> for more.</p>
<p>See the <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1170-2017-04-27">detailed release notes</a> for more.</p>
<h4 id="cargo-features"><a class="anchor" href="#cargo-features" aria-hidden="true"></a>
Cargo features</h4>
<p>Other than the previously mentioned <code>build.rs</code> changes, Cargo has a few new improvements.
<a href="https://github.com/rust-lang/cargo/pull/3731"><code>cargo check --all</code></a> and
<a href="https://github.com/rust-lang/cargo/pull/3691"><code>cargo run --package</code></a> are two missing
flags that are now supported.</p>
<p>You can now <a href="https://github.com/rust-lang/cargo/pull/3699">opt in to ignoring SSL revocation checks</a>. The default is still to check, of course.</p>
<p>A new field in <code>Cargo.toml</code>, <code>required-features</code>, lets you <a href="https://github.com/rust-lang/cargo/pull/3667">specify specific features
that must be set for a target to be built</a>.
Here's an example: let's say that we are writing a crate that interacts with databases,
and that we support multiple databases. We might have this in our <code>Cargo.toml</code>:</p>
<pre data-lang="toml" class="language-toml z-code"><code class="language-toml" data-lang="toml"><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-begin z-toml">[</span><span class="z-meta z-tag z-table z-toml"><span class="z-entity z-name z-table z-toml">features</span></span><span class="z-punctuation z-definition z-table z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> ...</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">postgres</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">sqlite</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">tools</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span></code></pre>
<p>The <code>tools</code> feature allows us to include extra tooling, and the <code>postgres</code> and <code>sqlite</code>
features control which databses we want to support.</p>
<p>Previously, <code>cargo build</code> would attempt to build all targets, which is normally what
you want. But what if we had a <code>src/bin/postgres-tool.rs</code>, that would only really
be relevant if the <code>postgres</code> and <code>tools</code> features would be enabled? Previously,
we would have to write something like this:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">cfg</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function-call z-rust"><span class="z-variable z-function z-rust">not</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-function-call z-rust"><span class="z-meta z-function-call z-rust"><span class="z-variable z-function z-rust">all</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-function-call z-rust">feature <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>postgres<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> feature <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>tools<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-function-call z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span></span><span class="z-meta z-function-call z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-macro z-rust">println!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>This tool requires the `postgres` and `tools` features to be enabled.<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">cfg</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-function-call z-rust"><span class="z-variable z-function z-rust">all</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-function-call z-rust">feature <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>postgres<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span> feature <span class="z-keyword z-operator z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>tools<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-function-call z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> real code
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>This is a lot of boilerplate to work around <code>cargo build</code>'s behavior. It's even
more unfortunate with <code>examples/</code>, which are supposed to show off how to use
your library, but this shenanigans is only relevant within the package, not if
you were to try to use the example on your own.</p>
<p>With the new <code>required-features</code> key, we can add this:</p>
<pre data-lang="toml" class="language-toml z-code"><code class="language-toml" data-lang="toml"><span class="z-source z-toml"><span class="z-punctuation z-definition z-table z-array z-begin z-toml">[[</span><span class="z-meta z-tag z-table z-array z-toml"><span class="z-entity z-name z-table z-toml">bin</span></span><span class="z-punctuation z-definition z-table z-array z-end z-toml">]]</span>
</span><span class="z-source z-toml"><span class="z-comment z-line z-number-sign z-toml"><span class="z-punctuation z-definition z-comment z-toml">#</span> ...</span>
</span><span class="z-source z-toml"><span class="z-meta z-tag z-key z-toml"><span class="z-entity z-name z-tag z-toml">required-features</span></span> <span class="z-punctuation z-definition z-key-value z-toml">=</span> <span class="z-punctuation z-definition z-array z-begin z-toml">[</span><span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>postgres<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-separator z-array z-toml">,</span> <span class="z-string z-quoted z-double z-basic z-toml"><span class="z-punctuation z-definition z-string z-begin z-toml">&quot;</span>tools<span class="z-punctuation z-definition z-string z-end z-toml">&quot;</span></span><span class="z-punctuation z-definition z-array z-end z-toml">]</span>
</span></code></pre>
<p>Now, <code>cargo build</code> will only build our <code>postgres-tool</code> if we have the two features
set, and so we can write a normal <code>fn main</code> without all the <code>cfg</code> nonsense getting
in the way.</p>
<p>See the <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1170-2017-04-27">detailed release notes</a> for more.</p>
<h3 id="contributors-to-1-17-0"><a class="anchor" href="#contributors-to-1-17-0" aria-hidden="true"></a>
Contributors to 1.17.0</h3>
<p>Many people came together to create Rust 1.17. We couldn't have done it without
all of you. <a href="https://thanks.rust-lang.org/rust/1.17.0">Thanks!</a></p>

    </div>
  </div>
</section>
    <footer class="footer">
      <div class="w-100 mw-none ph3 mw8-m mw9-l center f3">
        <div class="row">
          <div class="four columns mt3 mt0-l" id="get-help">
            <h4>Get help!</h4>
            <ul>
              <li><a href="https://doc.rust-lang.org" target="_blank" rel="noopener">Documentation</a></li>
              <li><a href="mailto:core-team@rust-lang.org">Contact the Rust Team</a></li>
            </ul>
          </div>
          <div class="four columns mt3 mt0-l">
            <h4>Terms and policies</h4>
            <ul>
              <li><a href="https://www.rust-lang.org/policies/code-of-conduct">Code of Conduct</a></li>
              <li><a href="https://www.rust-lang.org/policies/licenses">Licenses</a></li>
              <li><a href="https://www.rust-lang.org/policies/media-guide">Logo Policy and Media Guide</a></li>
              <li><a href="https://www.rust-lang.org/policies/security">Security Disclosures</a></li>
              <li><a href="https://www.rust-lang.org/policies">All Policies</a></li>
            </ul>
          </div>
          <div class="four columns mt3 mt0-l">
            <h4>Social</h4>
            <div class="flex flex-row flex-wrap">
              <a rel="me" href="https://social.rust-lang.org/@rust" target="_blank" rel="noopener" alt="mastodon link"><img src="https://blog.rust-lang.org/images/mastodon.svg" alt="mastodon logo" title="Mastodon"/></a>
              <a rel="me" href="https://bsky.app/profile/rust-lang.org" target="_blank" rel="noopener" alt="Bluesky link"><img src="https://blog.rust-lang.org/images/bluesky.svg" alt="Bluesky logo" title="Bluesky"/></a>
              <a href="https://www.youtube.com/channel/UCaYhcUwRBNscFNUKTjgPFiA" target="_blank" rel="noopener" alt="youtube link"><img style="padding-top: 6px; padding-bottom:6px" src="https://blog.rust-lang.org/images/youtube.svg" alt="youtube logo" title="YouTube"/></a>
              <a href="https://discord.gg/rust-lang" target="_blank" rel="noopener" alt="discord link"><img src="https://blog.rust-lang.org/images/discord.svg" alt="discord logo" title="Discord"/></a>
              <a href="https://github.com/rust-lang" target="_blank" rel="noopener" alt="github link"><img src="https://blog.rust-lang.org/images/github.svg" alt="github logo" title="GitHub"/></a>
            </div>
            <h4 class="mt4 mb3">RSS</h4>
            <ul>
              <li><a href="https://blog.rust-lang.org/feed.xml">Main Blog</a></li>
              <li><a href="https://blog.rust-lang.org/inside-rust/feed.xml">"Inside Rust" Blog</a></li>
            </ul>
          </div>
    
        </div>
        <div class="attribution">
          Maintained by the Rust Team. See a typo?
          <a href="https://github.com/rust-lang/blog.rust-lang.org/edit/master/content/Rust-1.17.md" target="_blank" rel="noopener">Send a fix here</a>!
        </div>
      </div>
    </footer>
  </body>
</html>
