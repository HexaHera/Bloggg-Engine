<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Announcing Rust 1.82.0 | Rust Blog</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="description" content="Empowering everyone to build reliable and efficient software.">
     <!-- Twitter card -->
     <meta name="twitter:card" content="summary">
     <meta name="twitter:site" content="@rustlang">
     <meta name="twitter:creator" content="@rustlang">
     <meta name="twitter:title" content="Announcing Rust 1.82.0 | Rust Blog">
     <meta name="twitter:description" content="Empowering everyone to build reliable and efficient software.">
    <meta name="twitter:image" content="https://www.rust-lang.org/static/images/rust-social.jpg">
    
    <!-- Facebook OpenGraph -->
    <meta property="og:title" content="Announcing Rust 1.82.0 | Rust Blog" />
    <meta property="og:description" content="Empowering everyone to build reliable and efficient software.">
    <meta property="og:image" content="https://www.rust-lang.org/static/images/rust-social-wide.jpg" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    
    <!-- styles -->
    <link rel="stylesheet" href="https://blog.rust-lang.org/styles/skeleton.css"/>
    <link rel="stylesheet" href="https://blog.rust-lang.org/styles/tachyons.css"/>
    <link rel="stylesheet" href="https://blog.rust-lang.org/styles/fonts.css"/>
    <link rel="stylesheet" href="https://blog.rust-lang.org/styles/app.css"/>
    <link rel="stylesheet" type="text/css" id="syntax-theme" />
    
    <!-- stylesheet for user agents without js -->
    <noscript>
        <link rel="stylesheet" href="https://blog.rust-lang.org/styles/noscript.css">
        <link rel="stylesheet" type="text/css" href="/styles/syntax-theme-dark.css" media="(prefers-color-scheme: dark)" />
        <link rel="stylesheet" type="text/css" href="/styles/syntax-theme-light.css" media="(prefers-color-scheme: light)" />
    </noscript>
    
    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://blog.rust-lang.org/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://blog.rust-lang.org/images/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://blog.rust-lang.org/images/favicon-32x32.png">
    <link rel="icon" type="image/svg+xml" href="https://blog.rust-lang.org/images/favicon.svg">
    <link rel="manifest" href="https://blog.rust-lang.org/images/site.webmanifest">
    <link rel="mask-icon" href="https://blog.rust-lang.org/images/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#ffffff">
    
     <!-- atom -->
     <link type="application/atom+xml" rel="alternate" href="https://blog.rust-lang.org/feed.xml" title="Rust Blog" />
    
    <!-- theme switcher -->
    <script src="https://blog.rust-lang.org/scripts/theme-switch.js"></script>
  </head>
  <body>
    <nav class="flex flex-row justify-center justify-end-l items-center flex-wrap ph2 pl3-ns pr4-ns">
      <div class="brand flex-auto w-100 w-auto-l self-start tc tl-l">
        <a href="https://blog.rust-lang.org/">
          <img class="v-mid ml0-l rust-logo" alt="Rust Logo" src="https://blog.rust-lang.org/images/rust-logo-blk.svg">
          <span class="dib ml1 ml0-l">Rust Blog</span>
        </a>
      </div>
    
      <ul class="nav list w-100 w-auto-l flex flex-none flex-row flex-wrap justify-center justify-end-l items-center pv2 ph0 ph4-ns">
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org">Rust</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/tools/install">Install</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/learn">Learn</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/tools">Tools</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/governance">Governance</a></li>
        <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/community">Community</a></li>
        <button class="theme-icon" onclick="dropdown();">ðŸ–Œ
          <ul id="theme-choice">
            <li class="theme-item" onclick="changeThemeTo('light');">Light</li>
            <li class="theme-item" onclick="changeThemeTo('dark');">Dark</li>
            <li class="theme-item" onclick="changeThemeTo('system');">System</li>
          </ul>
        </button>
        <script src="https://blog.rust-lang.org/scripts/theme-switch-post.js"></script>
      </ul>
    </nav><section id="Announcing Rust 1.82.0" class="white">
  <div class="w-100 mw-none ph3 mw8-m mw8-l center f3">
    <header>
      <h2>Announcing Rust 1.82.0</h2>
      <div class="highlight mt2 mb3"></div>
    </header>

    <div class="publish-date-author">Oct. 17, 2024 &middot; The Rust Release Team
    
    </div>

    <div class="post">
      <p>The Rust team is happy to announce a new version of Rust, 1.82.0. Rust is a programming language empowering everyone to build reliable and efficient software.</p>
<p>If you have a previous version of Rust installed via <code>rustup</code>, you can get 1.82.0 with:</p>
<pre class="z-code"><code><span class="z-text z-plain">$ rustup update stable
</span></code></pre>
<p>If you don't have it already, you can <a href="https://www.rust-lang.org/install.html">get <code>rustup</code></a> from the appropriate page on our website, and check out the <a href="https://doc.rust-lang.org/stable/releases.html#version-1820-2024-10-17">detailed release notes for 1.82.0</a>.</p>
<p>If you'd like to help us out by testing future releases, you might consider updating locally to use the beta channel (<code>rustup default beta</code>) or the nightly channel (<code>rustup default nightly</code>). Please <a href="https://github.com/rust-lang/rust/issues/new/choose">report</a> any bugs you might come across!</p>
<h2 id="what-s-in-1-82-0-stable"><a class="anchor" href="#what-s-in-1-82-0-stable" aria-hidden="true"></a>
What's in 1.82.0 stable</h2>
<h3 id="cargo-info"><a class="anchor" href="#cargo-info" aria-hidden="true"></a>
<code>cargo info</code></h3>
<p>Cargo now has an <a href="https://doc.rust-lang.org/stable/cargo/commands/cargo-info.html"><code>info</code> subcommand</a> to display information about a package in the registry, fulfilling a <a href="https://github.com/rust-lang/cargo/issues/948">long standing request</a> just shy of its tenth anniversary! Several third-party extensions like this have been written over the years, and this implementation was developed as <a href="https://crates.io/crates/cargo-information">cargo-information</a> before merging into Cargo itself.</p>
<p>For example, here's what you could see for <code>cargo info cc</code>:</p>
<pre>
<code class="language-text"><b><span style="color:#0A0">cc</span></b> <b><span style="color:#0AA">#build-dependencies</span></b>
A build-time dependency for Cargo build scripts to assist in invoking the native
C compiler to compile native C code into a static archive to be linked into Rust
code.
<b><span style="color:#0A0">version:</span></b> 1.1.23 <b><span style="color:#A50">(latest 1.1.30)</span></b>
<b><span style="color:#0A0">license:</span></b> MIT OR Apache-2.0
<b><span style="color:#0A0">rust-version:</span></b> 1.63
<b><span style="color:#0A0">documentation:</span></b> https://docs.rs/cc
<b><span style="color:#0A0">homepage:</span></b> https://github.com/rust-lang/cc-rs
<b><span style="color:#0A0">repository:</span></b> https://github.com/rust-lang/cc-rs
<b><span style="color:#0A0">crates.io:</span></b> https://crates.io/crates/cc/1.1.23
<b><span style="color:#0A0">features:</span></b>
  jobserver = []
  parallel  = [dep:libc, dep:jobserver]
<b><span style="color:#0AA">note</span></b><b>:</b> to see how you depend on cc, run `<b><span style="color:#0AA">cargo tree --invert --package cc@1.1.23</span></b>`
</code></pre>
<p>By default, <code>cargo info</code> describes the package version in the local <code>Cargo.lock</code>, if any. As you can see, it will indicate when there's a newer version too, and <code>cargo info cc@1.1.30</code> would report on that.</p>
<h3 id="apple-target-promotions"><a class="anchor" href="#apple-target-promotions" aria-hidden="true"></a>
Apple target promotions</h3>
<h4 id="macos-on-64-bit-arm-is-now-tier-1"><a class="anchor" href="#macos-on-64-bit-arm-is-now-tier-1" aria-hidden="true"></a>
macOS on 64-bit ARM is now Tier 1</h4>
<p>The Rust target <code>aarch64-apple-darwin</code> for macOS on 64-bit ARM (M1-family or later Apple Silicon CPUs) is now a tier 1 target, indicating our highest guarantee of working properly. As the <a href="https://doc.rust-lang.org/stable/rustc/platform-support.html">platform support</a> page describes, every change in the Rust repository must pass full tests on every tier 1 target before it can be merged. This target was introduced as tier 2 back in Rust 1.49, making it available in <code>rustup</code>. This new milestone puts the <code>aarch64-apple-darwin</code> target on par with the 64-bit ARM Linux and the X86 macOS, Linux, and Windows targets.</p>
<h4 id="mac-catalyst-targets-are-now-tier-2"><a class="anchor" href="#mac-catalyst-targets-are-now-tier-2" aria-hidden="true"></a>
Mac Catalyst targets are now Tier 2</h4>
<p><a href="https://developer.apple.com/mac-catalyst/">Mac Catalyst</a> is a technology by Apple that allows running iOS applications natively on the Mac. This is especially useful when testing iOS-specific code, as <code>cargo test --target=aarch64-apple-ios-macabi --target=x86_64-apple-ios-macabi</code> mostly just works (in contrast to the usual iOS targets, which need to be bundled using external tooling before they can be run on a native device or in the simulator).</p>
<p><a href="https://doc.rust-lang.org/stable/rustc/platform-support/apple-ios-macabi.html">The targets</a> are now tier 2, and can be downloaded with <code>rustup target add aarch64-apple-ios-macabi x86_64-apple-ios-macabi</code>, so now is an excellent time to update your CI pipeline to test that your code also runs in iOS-like environments.</p>
<h3 id="precise-capturing-use-syntax"><a class="anchor" href="#precise-capturing-use-syntax" aria-hidden="true"></a>
Precise capturing <code>use&lt;..&gt;</code> syntax</h3>
<p>Rust now supports <code>use&lt;..&gt;</code> syntax within certain <code>impl Trait</code> bounds to control which generic lifetime parameters are captured.</p>
<p>Return-position <code>impl Trait</code> (RPIT) types in Rust <em>capture</em> certain generic parameters.  Capturing a generic parameter allows that parameter to be used in the hidden type.  That in turn affects borrow checking.</p>
<p>In Rust 2021 and earlier editions, lifetime parameters are not captured in opaque types on bare functions and on functions and methods of inherent impls unless those lifetime parameters are mentioned syntactically in the opaque type.  E.g., this is an error:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>@ edition: 2021
</span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">f</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> impl Sized</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> x </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<pre class="z-code"><code><span class="z-text z-plain">error[E0700]: hidden type for `impl Sized` captures lifetime that does not appear in bounds
</span><span class="z-text z-plain"> --&gt; src/main.rs:1:30
</span><span class="z-text z-plain">  |
</span><span class="z-text z-plain">1 | fn f(x: &amp;()) -&gt; impl Sized { x }
</span><span class="z-text z-plain">  |         ---     ----------   ^
</span><span class="z-text z-plain">  |         |       |
</span><span class="z-text z-plain">  |         |       opaque type defined here
</span><span class="z-text z-plain">  |         hidden type `&amp;()` captures the anonymous lifetime defined here
</span><span class="z-text z-plain">  |
</span><span class="z-text z-plain">help: add a `use&lt;...&gt;` bound to explicitly capture `&#39;_`
</span><span class="z-text z-plain">  |
</span><span class="z-text z-plain">1 | fn f(x: &amp;()) -&gt; impl Sized + use&lt;&#39;_&gt; { x }
</span><span class="z-text z-plain">  |                            +++++++++
</span></code></pre>
<p>With the new <code>use&lt;..&gt;</code> syntax, we can fix this, as suggested in the error, by writing:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">f</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> impl Sized </span></span><span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-keyword z-other z-rust">use</span><span class="z-keyword z-operator z-comparison z-rust">&lt;</span><span class="z-keyword z-operator z-rust">&#39;</span><span class="z-keyword z-operator z-rust">_</span><span class="z-keyword z-operator z-comparison z-rust">&gt;</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> x </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Previously, correctly fixing this class of error required defining a dummy trait, conventionally called <code>Captures</code>, and using it as follows:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-trait z-rust"><span class="z-storage z-type z-trait z-rust">trait</span> <span class="z-entity z-name z-trait z-rust">Captures</span>&lt;T: ?Sized&gt; <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust"><span class="z-meta z-impl z-rust"><span class="z-storage z-type z-impl z-rust">impl</span></span><span class="z-meta z-impl z-rust"><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-separator z-rust">:</span> <span class="z-invalid z-illegal z-rust">?</span></span></span><span class="z-meta z-impl z-rust"><span class="z-entity z-name z-impl z-rust">Sized</span>, <span class="z-entity z-name z-impl z-rust">U</span>: ?<span class="z-entity z-name z-impl z-rust">Sized</span>&gt; <span class="z-entity z-name z-impl z-rust">Captures</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> <span class="z-entity z-name z-impl z-rust">for</span> <span class="z-entity z-name z-impl z-rust">U</span> </span><span class="z-meta z-impl z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">f</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> impl Sized </span></span><span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-meta z-generic z-rust">Captures<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-keyword z-operator z-rust">&amp;</span>&#39;<span class="z-keyword z-operator z-rust">_</span> <span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-punctuation z-section z-group z-end z-rust">)</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> x </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>That was called <a href="https://github.com/rust-lang/rfcs/blob/master/text/3498-lifetime-capture-rules-2024.md#the-captures-trick">"the <code>Captures</code> trick"</a>, and it was a bit baroque and subtle.  It's no longer needed.</p>
<p>There was a less correct but more convenient way to fix this that was often used called <a href="https://github.com/rust-lang/rfcs/blob/master/text/3498-lifetime-capture-rules-2024.md#the-outlives-trick">"the outlives trick"</a>.  The compiler even previously suggested doing this.  That trick looked like this:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">f</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> impl Sized </span></span><span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-keyword z-operator z-rust">&#39;</span><span class="z-keyword z-operator z-rust">_</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> x </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>In this simple case, the trick is exactly equivalent to <code>+ use&lt;'_&gt;</code> for subtle reasons explained in <a href="https://github.com/rust-lang/rfcs/blob/master/text/3498-lifetime-capture-rules-2024.md">RFC 3498</a>.  However, in real life cases, this overconstrains the bounds on the returned opaque type, leading to problems.  For example, consider this code, which is inspired by a real case in the Rust compiler:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-generic z-rust"><span class="z-entity z-name z-struct z-rust">Ctx</span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;cx</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span></span><span class="z-meta z-struct z-rust"></span><span class="z-meta z-struct z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;cx</span> <span class="z-storage z-type z-rust">u8</span></span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">f</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;cx</span>, <span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">cx</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust">Ctx<span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;cx</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust">    <span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-type z-rust">u8</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> impl <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Iterator</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>Item = <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-storage z-modifier z-lifetime z-rust">&#39;a</span> <span class="z-storage z-type z-rust">u8</span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span> </span></span><span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-storage z-modifier z-lifetime z-rust">&#39;cx</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">core<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">iter<span class="z-punctuation z-accessor z-rust">::</span></span>once_with<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">move</span> <span class="z-keyword z-operator z-logical z-rust">||</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-macro z-rust">eprintln!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>LOG: <span class="z-constant z-other z-placeholder z-rust">{}</span><span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-separator z-rust">,</span> cx<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-constant z-numeric z-integer z-decimal z-rust">0</span><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        x
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>~^ ERROR lifetime may not live long enough
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>We can't remove the <code>+ 'cx</code>, since the lifetime is used in the hidden type and so must be captured.  Neither can we add a bound of <code>'a: 'cx</code>, since these lifetimes are not actually related and it won't in general be true that <code>'a</code> outlives <code>'cx</code>.  If we write <code>+ use&lt;'cx, 'a&gt;</code> instead, however, this will work and have the correct bounds.</p>
<p>There are some limitations to what we're stabilizing today.  The <code>use&lt;..&gt;</code> syntax cannot currently appear within traits or within trait impls (but note that there, in-scope lifetime parameters are already captured by default), and it must list all in-scope generic type and const parameters.  We hope to lift these restrictions over time.</p>
<p>Note that in Rust 2024, the examples above will "just work" without needing <code>use&lt;..&gt;</code> syntax (or any tricks).  This is because in the new edition, opaque types will automatically capture all lifetime parameters in scope.  This is a better default, and we've seen a lot of evidence about how this cleans up code.  In Rust 2024, <code>use&lt;..&gt;</code> syntax will serve as an important way of opting-out of that default.</p>
<p>For more details about <code>use&lt;..&gt;</code> syntax, capturing, and how this applies to Rust 2024, see the <a href="https://doc.rust-lang.org/stable/edition-guide/rust-2024/rpit-lifetime-capture.html">"RPIT lifetime capture rules"</a> chapter of the edition guide.  For details about the overall direction, see our recent blog post, <a href="https://blog.rust-lang.org/2024/09/05/impl-trait-capture-rules.html">"Changes to <code>impl Trait</code> in Rust 2024"</a>.</p>
<h3 id="native-syntax-for-creating-a-raw-pointer"><a class="anchor" href="#native-syntax-for-creating-a-raw-pointer" aria-hidden="true"></a>
Native syntax for creating a raw pointer</h3>
<p>Unsafe code sometimes has to deal with pointers that may dangle, may be misaligned, or may not point to valid data. A common case where this comes up are <code>repr(packed)</code> structs. In such a case, it is important to avoid creating a reference, as that would cause undefined behavior. This means the usual <code>&amp;</code> and <code>&amp;mut</code> operators cannot be used, as those create a reference -- even if the reference is immediately cast to a raw pointer, it's too late to avoid the undefined behavior.</p>
<p>For several years, the macros <code>std::ptr::addr_of!</code> and <code>std::ptr::addr_of_mut!</code> have served this purpose. Now the time has come to provide a proper native syntax for this operation: <code>addr_of!(expr)</code> becomes <code>&amp;raw const expr</code>, and <code>addr_of_mut!(expr)</code> becomes <code>&amp;raw mut expr</code>. For example:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">repr</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">packed</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-storage z-type z-struct z-rust">struct</span> </span><span class="z-meta z-struct z-rust"><span class="z-entity z-name z-struct z-rust">Packed</span> </span><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust">    <span class="z-variable z-other z-member z-rust">not_aligned_field</span><span class="z-punctuation z-separator z-type z-rust">:</span> <span class="z-storage z-type z-rust">i32</span>,
</span></span></span><span class="z-source z-rust"><span class="z-meta z-struct z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> p <span class="z-keyword z-operator z-assignment z-rust">=</span> Packed <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> not_aligned_field<span class="z-punctuation z-separator z-rust">:</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1_82</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This would be undefined behavior!
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> It is rejected by the compiler.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span>let ptr = &amp;p.not_aligned_field as *const i32;
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This is the old way of creating a pointer.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> ptr <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">ptr<span class="z-punctuation z-accessor z-rust">::</span></span>addr_of<span class="z-keyword z-operator z-logical z-rust">!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>p<span class="z-punctuation z-accessor z-dot z-rust">.</span>not_aligned_field</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> This is the new way.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> ptr <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>raw <span class="z-storage z-type z-rust">const</span> p<span class="z-punctuation z-accessor z-dot z-rust">.</span>not_aligned_field<span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Accessing the pointer has not changed.
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Note that `val = *ptr` would be undefined behavior because
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> the pointer is not aligned!
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> val <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-storage z-modifier z-rust">unsafe</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> ptr<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">read_unaligned</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>The native syntax makes it more clear that the operand expression of these operators is interpreted as a <a href="https://www.ralfj.de/blog/2024/08/14/places.html">place expression</a>. It also avoids the term "address-of" when referring to the action of creating a pointer. A pointer is <a href="https://rust-lang.github.io/rfcs/3559-rust-has-provenance.html">more than just an address</a>, so Rust is moving away from terms like "address-of" that reaffirm a false equivalence of pointers and addresses.</p>
<h3 id="safe-items-with-unsafe-extern"><a class="anchor" href="#safe-items-with-unsafe-extern" aria-hidden="true"></a>
Safe items with <code>unsafe extern</code></h3>
<p>Rust code can use functions and statics from foreign code.  The type signatures of these foreign items are provided in <code>extern</code> blocks.  Historically, all items within <code>extern</code> blocks have been unsafe to use, but we didn't have to write <code>unsafe</code> anywhere on the <code>extern</code> block itself.</p>
<p>However, if a signature within the <code>extern</code> block is incorrect, then using that item will result in undefined behavior.  Would that be the fault of the person who wrote the <code>extern</code> block, or the person who used that item?</p>
<p>We've decided that it's the responsibility of the person writing the <code>extern</code> block to ensure that all signatures contained within it are correct, and so we now allow writing <code>unsafe extern</code>:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">unsafe</span> <span class="z-keyword z-other z-rust">extern</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">pub</span> safe <span class="z-storage z-type z-rust">static</span> <span class="z-constant z-other z-rust">TAU</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f64</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">pub</span> safe <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">sqrt</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">f64</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-storage z-type z-rust">f64</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-modifier z-rust">unsafe</span> <span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">strlen</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">p</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-modifier z-rust">*const</span> <span class="z-storage z-type z-rust">u8</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-storage z-type z-rust">usize</span></span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>One benefit of this is that items within an <code>unsafe extern</code> block can be marked as safe to use.  In the above example, we can call <code>sqrt</code> or read <code>TAU</code> without using <code>unsafe</code>.  Items that aren't marked with either <code>safe</code> or <code>unsafe</code> are conservatively assumed to be <code>unsafe</code>.</p>
<p>In future releases, we'll be encouraging the use of <code>unsafe extern</code> with lints.  Starting in Rust 2024, using <code>unsafe extern</code> will be required.</p>
<p>For further details, see <a href="https://github.com/rust-lang/rfcs/blob/master/text/3484-unsafe-extern-blocks.md">RFC 3484</a> and the <a href="https://doc.rust-lang.org/stable/edition-guide/rust-2024/unsafe-extern.html">"Unsafe extern blocks"</a> chapter of the edition guide.</p>
<h3 id="unsafe-attributes"><a class="anchor" href="#unsafe-attributes" aria-hidden="true"></a>
Unsafe attributes</h3>
<p>Some Rust attributes, such as <a href="https://doc.rust-lang.org/reference/abi.html#the-no_mangle-attribute"><code>no_mangle</code></a>, can be used to <a href="https://github.com/rust-lang/rust/issues/28179">cause undefined behavior without any <code>unsafe</code> block</a>. If this were regular code we would require them to be placed in an <code>unsafe {}</code> block, but so far attributes have not had comparable syntax. To reflect the fact that these attributes can undermine Rust's safety guarantees, they are now considered "unsafe" and should be written as follows:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-annotation z-rust"><span class="z-punctuation z-definition z-annotation z-rust">#</span><span class="z-punctuation z-section z-group z-begin z-rust">[</span><span class="z-variable z-annotation z-rust">unsafe</span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust">no_mangle</span></span><span class="z-meta z-annotation z-parameters z-rust"><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-punctuation z-section z-group z-end z-rust">]</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">my_global_function</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span> </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>The old form of the attribute (without <code>unsafe</code>) is currently still accepted, but might be linted against at some point in the future, and will be a hard error in Rust 2024.</p>
<p>This affects the following attributes:</p>
<ul>
<li><code>no_mangle</code></li>
<li><code>link_section</code></li>
<li><code>export_name</code></li>
</ul>
<p>For further details, see the <a href="https://doc.rust-lang.org/stable/edition-guide/rust-2024/unsafe-attributes.html">"Unsafe attributes"</a> chapter of the edition guide.</p>
<h3 id="omitting-empty-types-in-pattern-matching"><a class="anchor" href="#omitting-empty-types-in-pattern-matching" aria-hidden="true"></a>
Omitting empty types in pattern matching</h3>
<p>Patterns which match empty (a.k.a. uninhabited) types by value can now be omitted:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">convert<span class="z-punctuation z-accessor z-rust">::</span></span>Infallible<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">unwrap_without_panic</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T, Infallible<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> T</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Ok</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>x</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> x<span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> the `Err` case does not need to appear
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    x
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>This works with empty types such as a variant-less <code>enum Void {}</code>, or structs and enums with a visible empty field and no <code>#[non_exhaustive]</code> attribute. It will also be particularly useful in combination with the never type <code>!</code>, although that type is still unstable at this time.</p>
<p>There are some cases where empty patterns must still be written. For reasons related to uninitialized values and unsafe code, omitting patterns is not allowed if the empty type is accessed through a reference, pointer, or union field:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-modifier z-rust">pub</span> <span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">unwrap_ref_without_panic</span></span><span class="z-meta z-generic z-rust"><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span><span class="z-variable z-parameter z-rust">x</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-rust">&amp;</span><span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>T, Infallible<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-keyword z-operator z-rust">&amp;</span>T</span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">match</span> x <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Ok</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>x</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> x<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> this arm cannot be omitted because of the reference
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-support z-type z-rust">Err</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>infallible</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-rust">=&gt;</span> <span class="z-keyword z-control z-rust">match</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span>infallible <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>To avoid interfering with crates that wish to support several Rust versions, <code>match</code> arms with empty patterns are not yet reported as â€œunreachable codeâ€ warnings, despite the fact that they can be removed.</p>
<h3 id="floating-point-nan-semantics-and-const"><a class="anchor" href="#floating-point-nan-semantics-and-const" aria-hidden="true"></a>
Floating-point NaN semantics and <code>const</code></h3>
<p>Operations on floating-point values (of type <code>f32</code> and <code>f64</code>) are famously subtle. One of the reasons for this is the existence of NaN ("not a number") values which are used to represent e.g. the result of <code>0.0 / 0.0</code>. What makes NaN values subtle is that more than one possible NaN value exists. A NaN value has a sign (that can be checked with <code>f.is_sign_positive()</code>) and a payload (that can be extracted with <code>f.to_bits()</code>). However, both the sign and payload of NaN values are entirely ignored by <code>==</code> (which always returns <code>false</code>). Despite very successful efforts to standardize the behavior of floating-point operations across hardware architectures, the details of when a NaN is positive or negative and what its exact payload is differ across architectures. To make matters even more complicated, Rust and its LLVM backend apply optimizations to floating-point operations when the exact numeric result is guaranteed not to change, but those optimizations can change which NaN value is produced. For instance, <code>f * 1.0</code> may be optimized to just <code>f</code>. However, if <code>f</code> is a NaN, this can change the exact bit pattern of the result!</p>
<p>With this release, Rust standardizes on a set of rules for how NaN values behave. This set of rules is <em>not</em> fully deterministic, which means that the result of operations like <code>(0.0 / 0.0).is_sign_positive()</code> can differ depending on the hardware architecture, optimization levels, and the surrounding code. Code that aims to be fully portable should avoid using <code>to_bits</code> and should use <code>f.signum() == 1.0</code> instead of <code>f.is_sign_positive()</code>. However, the rules are carefully chosen to still allow advanced data representation techniques such as NaN boxing to be implemented in Rust code. For more details on what the exact rules are, check out our <a href="https://doc.rust-lang.org/std/primitive.f32.html#nan-bit-patterns">documentation</a>.</p>
<p>With the semantics for NaN values settled, this release also permits the use of floating-point operations in <code>const fn</code>. Due to the reasons described above, operations like <code>(0.0 / 0.0).is_sign_positive()</code> (which will be const-stable in Rust 1.83) can produce a different result when executed at compile-time vs at run-time. This is not a bug, and code must not rely on a <code>const fn</code> always producing the exact same result.</p>
<h3 id="constants-as-assembly-immediates"><a class="anchor" href="#constants-as-assembly-immediates" aria-hidden="true"></a>
Constants as assembly immediates</h3>
<p>The <code>const</code> assembly operand now provides a way to use integers as immediates
without first storing them in a register. As an example, we implement a syscall to
<a href="https://man7.org/linux/man-pages/man2/write.2.html"><code>write</code></a> by hand:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">WRITE_SYSCALL</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">c_int</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-rust">0x01</span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> syscall 1 is `write`
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">STDOUT_HANDLE</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">c_int</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-constant z-numeric z-integer z-hexadecimal z-rust">0x01</span><span class="z-punctuation z-terminator z-rust">;</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> `stdout` has file handle 1
</span></span><span class="z-source z-rust"><span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">MSG</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span><span class="z-storage z-type z-rust">str</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Hello, world!<span class="z-constant z-character z-escape z-rust">\n</span><span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> written<span class="z-punctuation z-separator z-rust">:</span> <span class="z-storage z-type z-rust">usize</span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> Signature: `ssize_t write(int fd, const void buf[], size_t count)`
</span></span><span class="z-source z-rust"><span class="z-storage z-modifier z-rust">unsafe</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-meta z-path z-rust">core<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">arch<span class="z-punctuation z-accessor z-rust">::</span></span>asm<span class="z-keyword z-operator z-logical z-rust">!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>mov rax, {SYSCALL} // rax holds the syscall number<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>mov rdi, {OUTPUT}  // rdi is `fd` (first argument)<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>mov rdx, {LEN}     // rdx is `count` (third argument)<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>syscall            // invoke the syscall<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>mov {written}, rax // save the return value<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-constant z-other z-rust">SYSCALL</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">WRITE_SYSCALL</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-constant z-other z-rust">OUTPUT</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">STDOUT_HANDLE</span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-constant z-other z-rust">LEN</span> <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">MSG</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">len</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        <span class="z-keyword z-operator z-rust">in</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>rsi<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-constant z-other z-rust">MSG</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">as_ptr</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-separator z-rust">,</span> <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> rsi is `buf *` (second argument)
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">        written <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-support z-function z-rust">out</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>reg</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> written<span class="z-punctuation z-separator z-rust">,</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust">    </span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-support z-macro z-rust">assert_eq!</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>written<span class="z-punctuation z-separator z-rust">,</span> <span class="z-constant z-other z-rust">MSG</span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">len</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Output:</p>
<pre class="z-code"><code><span class="z-text z-plain">Hello, world!
</span></code></pre>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=0cf8e21335b38011b49156c6c65929bc">Playground link</a>.</p>
<p>In the above, a statement such as <code>LEN = const MSG.len()</code> populates the format
specifier <code>LEN</code> with an immediate that takes the value of <code>MSG.len()</code>. This can be seen
in the generated assembly (the value is <code>14</code>):</p>
<pre data-lang="asm" class="language-asm z-code"><code class="language-asm" data-lang="asm"><span class="z-source z-assembly"><span class="z-keyword z-control z-assembly">lea</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">rsi</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-source z-assembly">[</span><span class="z-variable z-parameter z-register z-assembly">rip</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-source z-assembly">+</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">.</span><span class="z-entity z-name z-function z-assembly">L</span><span class="z-entity z-name z-function z-assembly">_</span><span class="z-entity z-name z-function z-assembly">_</span><span class="z-entity z-name z-function z-assembly">u</span><span class="z-entity z-name z-function z-assembly">n</span><span class="z-entity z-name z-function z-assembly">n</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">m</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly">d</span><span class="z-entity z-name z-function z-assembly">_</span><span class="z-entity z-name z-function z-assembly">3</span><span class="z-source z-assembly">]</span>
</span><span class="z-source z-assembly"><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">rax</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">#</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">rax</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">h</span><span class="z-entity z-name z-function z-assembly">o</span><span class="z-entity z-name z-function z-assembly">l</span><span class="z-entity z-name z-function z-assembly">d</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">h</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-keyword z-control z-assembly">syscall</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">n</span><span class="z-entity z-name z-function z-assembly">u</span><span class="z-entity z-name z-function z-assembly">m</span><span class="z-entity z-name z-function z-assembly">b</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly">r</span>
</span><span class="z-source z-assembly"><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">rdi</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">1</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">#</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">rdi</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">i</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">`</span><span class="z-entity z-name z-function z-assembly">f</span><span class="z-entity z-name z-function z-assembly">d</span><span class="z-entity z-name z-function z-assembly">`</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">(</span><span class="z-entity z-name z-function z-assembly">f</span><span class="z-entity z-name z-function z-assembly">i</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">g</span><span class="z-entity z-name z-function z-assembly">u</span><span class="z-entity z-name z-function z-assembly">m</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly">n</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">)</span>
</span><span class="z-source z-assembly"><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">rdx</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-constant z-character z-decimal z-assembly">14</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">#</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">rdx</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">i</span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">`</span><span class="z-entity z-name z-function z-assembly">c</span><span class="z-entity z-name z-function z-assembly">o</span><span class="z-entity z-name z-function z-assembly">u</span><span class="z-entity z-name z-function z-assembly">n</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">`</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">(</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">h</span><span class="z-entity z-name z-function z-assembly">i</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">d</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">g</span><span class="z-entity z-name z-function z-assembly">u</span><span class="z-entity z-name z-function z-assembly">m</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly">n</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">)</span>
</span><span class="z-source z-assembly"><span class="z-keyword z-control z-assembly">syscall</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">#</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">i</span><span class="z-entity z-name z-function z-assembly">n</span><span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">o</span><span class="z-entity z-name z-function z-assembly">k</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">h</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-keyword z-control z-assembly">syscall</span>
</span><span class="z-source z-assembly"><span class="z-keyword z-control z-assembly">mov</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">rax</span><span class="z-source z-assembly">,</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-variable z-parameter z-register z-assembly">rax</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">#</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">s</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">h</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">e</span><span class="z-entity z-name z-function z-assembly">t</span><span class="z-entity z-name z-function z-assembly">u</span><span class="z-entity z-name z-function z-assembly">r</span><span class="z-entity z-name z-function z-assembly">n</span><span class="z-entity z-name z-function z-assembly"> </span><span class="z-entity z-name z-function z-assembly">v</span><span class="z-entity z-name z-function z-assembly">a</span><span class="z-entity z-name z-function z-assembly">l</span><span class="z-entity z-name z-function z-assembly">u</span><span class="z-entity z-name z-function z-assembly">e</span>
</span></code></pre>
<p>See <a href="https://doc.rust-lang.org/reference/inline-assembly.html">the reference</a>
for more details.</p>
<h3 id="safely-addressing-unsafe-statics"><a class="anchor" href="#safely-addressing-unsafe-statics" aria-hidden="true"></a>
Safely addressing unsafe <code>static</code>s</h3>
<p>This code is now allowed:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">static</span> <span class="z-storage z-modifier z-rust">mut</span> <span class="z-constant z-other z-rust">STATIC_MUT</span><span class="z-punctuation z-separator z-rust">:</span> Type <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Type<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">extern</span> <span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>C<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">static</span> <span class="z-constant z-other z-rust">EXTERN_STATIC</span><span class="z-punctuation z-separator z-rust">:</span> Type<span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">     <span class="z-storage z-type z-rust">let</span> static_mut_ptr <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>raw <span class="z-storage z-modifier z-rust">mut</span> <span class="z-constant z-other z-rust">STATIC_MUT</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">     <span class="z-storage z-type z-rust">let</span> extern_static_ptr <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>raw <span class="z-storage z-type z-rust">const</span> <span class="z-constant z-other z-rust">EXTERN_STATIC</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>In an expression context, <code>STATIC_MUT</code> and <code>EXTERN_STATIC</code> are <a href="https://doc.rust-lang.org/reference/expressions.html#place-expressions-and-value-expressions">place expressions</a>. Previously, the compiler's safety checks were not aware that the raw ref operator did not actually affect the operand's place, treating it as a possible read or write to a pointer. No unsafety is actually present, however, as it just creates a pointer.</p>
<p>Relaxing this may cause problems where some unsafe blocks are now reported as unused if you deny the <code>unused_unsafe</code> lint, but they are now only useful on older versions. Annotate these unsafe blocks with <code>#[allow(unused_unsafe)]</code> if you wish to support multiple versions of Rust, as in this example diff:</p>
<pre data-lang="diff" class="language-diff z-code"><code class="language-diff" data-lang="diff"><span class="z-source z-diff"> static mut STATIC_MUT: Type = Type::new();
</span><span class="z-source z-diff"> fn main() {
</span><span class="z-source z-diff"><span class="z-markup z-inserted z-diff"><span class="z-punctuation z-definition z-inserted z-diff">+</span>    #[allow(unused_unsafe)]
</span></span><span class="z-source z-diff">     let static_mut_ptr = unsafe { std::ptr::addr_of_mut!(STATIC_MUT) };
</span><span class="z-source z-diff"> }
</span></code></pre>
<p>A future version of Rust is expected to generalize this to other expressions which would be safe in this position, not just statics.</p>
<h3 id="stabilized-apis"><a class="anchor" href="#stabilized-apis" aria-hidden="true"></a>
Stabilized APIs</h3>
<ul>
<li><a href="https://doc.rust-lang.org/stable/std/thread/struct.Builder.html#method.spawn_unchecked"><code>std::thread::Builder::spawn_unchecked</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/str/struct.CharIndices.html#method.offset"><code>std::str::CharIndices::offset</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/option/enum.Option.html#method.is_none_or"><code>std::option::Option::is_none_or</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/primitive.slice.html#method.is_sorted"><code>[T]::is_sorted</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/primitive.slice.html#method.is_sorted_by"><code>[T]::is_sorted_by</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/primitive.slice.html#method.is_sorted_by_key"><code>[T]::is_sorted_by_key</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/iter/trait.Iterator.html#method.is_sorted"><code>Iterator::is_sorted</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/iter/trait.Iterator.html#method.is_sorted_by"><code>Iterator::is_sorted_by</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/iter/trait.Iterator.html#method.is_sorted_by_key"><code>Iterator::is_sorted_by_key</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/future/struct.Ready.html#method.into_inner"><code>std::future::Ready::into_inner</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/iter/fn.repeat_n.html"><code>std::iter::repeat_n</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/iter/struct.Take.html#impl-DoubleEndedIterator-for-Take%3CRepeat%3CT%3E%3E"><code>impl&lt;T: Clone&gt; DoubleEndedIterator for Take&lt;Repeat&lt;T&gt;&gt;</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/iter/struct.Take.html#impl-ExactSizeIterator-for-Take%3CRepeat%3CT%3E%3E"><code>impl&lt;T: Clone&gt; ExactSizeIterator for Take&lt;Repeat&lt;T&gt;&gt;</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/iter/struct.Take.html#impl-ExactSizeIterator-for-Take%3CRepeatWith%3CF%3E%3E"><code>impl&lt;T: Clone&gt; ExactSizeIterator for Take&lt;RepeatWith&lt;T&gt;&gt;</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/collections/binary_heap/struct.Iter.html#impl-Default-for-Iter%3C&#x27;_,+T%3E"><code>impl Default for std::collections::binary_heap::Iter</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/collections/btree_map/struct.RangeMut.html#impl-Default-for-RangeMut%3C&#x27;_,+K,+V%3E"><code>impl Default for std::collections::btree_map::RangeMut</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/collections/btree_map/struct.ValuesMut.html#impl-Default-for-ValuesMut%3C&#x27;_,+K,+V%3E"><code>impl Default for std::collections::btree_map::ValuesMut</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/collections/vec_deque/struct.Iter.html#impl-Default-for-Iter%3C&#x27;_,+T%3E"><code>impl Default for std::collections::vec_deque::Iter</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/collections/vec_deque/struct.IterMut.html#impl-Default-for-IterMut%3C&#x27;_,+T%3E"><code>impl Default for std::collections::vec_deque::IterMut</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/rc/struct.Rc.html#method.new_uninit"><code>Rc&lt;T&gt;::new_uninit</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/rc/struct.Rc.html#method.assume_init"><code>Rc&lt;MaybeUninit&lt;T&gt;&gt;::assume_init</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/rc/struct.Rc.html#method.new_uninit_slice"><code>Rc&lt;[T]&gt;::new_uninit_slice</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/rc/struct.Rc.html#method.assume_init-1"><code>Rc&lt;[MaybeUninit&lt;T&gt;]&gt;::assume_init</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/sync/struct.Arc.html#method.new_uninit"><code>Arc&lt;T&gt;::new_uninit</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/sync/struct.Arc.html#method.assume_init"><code>Arc&lt;MaybeUninit&lt;T&gt;&gt;::assume_init</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/sync/struct.Arc.html#method.new_uninit_slice"><code>Arc&lt;[T]&gt;::new_uninit_slice</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/sync/struct.Arc.html#method.assume_init-1"><code>Arc&lt;[MaybeUninit&lt;T&gt;]&gt;::assume_init</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/boxed/struct.Box.html#method.new_uninit"><code>Box&lt;T&gt;::new_uninit</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/boxed/struct.Box.html#method.assume_init"><code>Box&lt;MaybeUninit&lt;T&gt;&gt;::assume_init</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/boxed/struct.Box.html#method.new_uninit_slice"><code>Box&lt;[T]&gt;::new_uninit_slice</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/boxed/struct.Box.html#method.assume_init-1"><code>Box&lt;[MaybeUninit&lt;T&gt;]&gt;::assume_init</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86_64/fn._bextri_u64.html"><code>core::arch::x86_64::_bextri_u64</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86_64/fn._bextri_u32.html"><code>core::arch::x86_64::_bextri_u32</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._mm_broadcastsi128_si256.html"><code>core::arch::x86::_mm_broadcastsi128_si256</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._mm256_stream_load_si256.html"><code>core::arch::x86::_mm256_stream_load_si256</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._tzcnt_u16.html"><code>core::arch::x86::_tzcnt_u16</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._mm_extracti_si64.html"><code>core::arch::x86::_mm_extracti_si64</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._mm_inserti_si64.html"><code>core::arch::x86::_mm_inserti_si64</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._mm_storeu_si16.html"><code>core::arch::x86::_mm_storeu_si16</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._mm_storeu_si32.html"><code>core::arch::x86::_mm_storeu_si32</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._mm_storeu_si64.html"><code>core::arch::x86::_mm_storeu_si64</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._mm_loadu_si16.html"><code>core::arch::x86::_mm_loadu_si16</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/x86/fn._mm_loadu_si32.html"><code>core::arch::x86::_mm_loadu_si32</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u8x16_relaxed_swizzle.html"><code>core::arch::wasm32::u8x16_relaxed_swizzle</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i8x16_relaxed_swizzle.html"><code>core::arch::wasm32::i8x16_relaxed_swizzle</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i32x4_relaxed_trunc_f32x4.html"><code>core::arch::wasm32::i32x4_relaxed_trunc_f32x4</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u32x4_relaxed_trunc_f32x4.html"><code>core::arch::wasm32::u32x4_relaxed_trunc_f32x4</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i32x4_relaxed_trunc_f64x2_zero.html"><code>core::arch::wasm32::i32x4_relaxed_trunc_f64x2_zero</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u32x4_relaxed_trunc_f64x2_zero.html"><code>core::arch::wasm32::u32x4_relaxed_trunc_f64x2_zero</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.f32x4_relaxed_madd.html"><code>core::arch::wasm32::f32x4_relaxed_madd</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.f32x4_relaxed_nmadd.html"><code>core::arch::wasm32::f32x4_relaxed_nmadd</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.f64x2_relaxed_madd.html"><code>core::arch::wasm32::f64x2_relaxed_madd</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.f64x2_relaxed_nmadd.html"><code>core::arch::wasm32::f64x2_relaxed_nmadd</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i8x16_relaxed_laneselect.html"><code>core::arch::wasm32::i8x16_relaxed_laneselect</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u8x16_relaxed_laneselect.html"><code>core::arch::wasm32::u8x16_relaxed_laneselect</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i16x8_relaxed_laneselect.html"><code>core::arch::wasm32::i16x8_relaxed_laneselect</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u16x8_relaxed_laneselect.html"><code>core::arch::wasm32::u16x8_relaxed_laneselect</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i32x4_relaxed_laneselect.html"><code>core::arch::wasm32::i32x4_relaxed_laneselect</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u32x4_relaxed_laneselect.html"><code>core::arch::wasm32::u32x4_relaxed_laneselect</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i64x2_relaxed_laneselect.html"><code>core::arch::wasm32::i64x2_relaxed_laneselect</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u64x2_relaxed_laneselect.html"><code>core::arch::wasm32::u64x2_relaxed_laneselect</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.f32x4_relaxed_min.html"><code>core::arch::wasm32::f32x4_relaxed_min</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.f32x4_relaxed_max.html"><code>core::arch::wasm32::f32x4_relaxed_max</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.f64x2_relaxed_min.html"><code>core::arch::wasm32::f64x2_relaxed_min</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.f64x2_relaxed_max.html"><code>core::arch::wasm32::f64x2_relaxed_max</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i16x8_relaxed_q15mulr.html"><code>core::arch::wasm32::i16x8_relaxed_q15mulr</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u16x8_relaxed_q15mulr.html"><code>core::arch::wasm32::u16x8_relaxed_q15mulr</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i16x8_relaxed_dot_i8x16_i7x16.html"><code>core::arch::wasm32::i16x8_relaxed_dot_i8x16_i7x16</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u16x8_relaxed_dot_i8x16_i7x16.html"><code>core::arch::wasm32::u16x8_relaxed_dot_i8x16_i7x16</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.i32x4_relaxed_dot_i8x16_i7x16_add.html"><code>core::arch::wasm32::i32x4_relaxed_dot_i8x16_i7x16_add</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/core/arch/wasm32/fn.u32x4_relaxed_dot_i8x16_i7x16_add.html"><code>core::arch::wasm32::u32x4_relaxed_dot_i8x16_i7x16_add</code></a></li>
</ul>
<p>These APIs are now stable in const contexts:</p>
<ul>
<li><a href="https://doc.rust-lang.org/stable/std/task/struct.Waker.html#method.from_raw"><code>std::task::Waker::from_raw</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/task/struct.Context.html#method.from_waker"><code>std::task::Context::from_waker</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/task/struct.Context.html#method.waker"><code>std::task::Context::waker</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/primitive.u32.html#method.from_str_radix"><code>$integer::from_str_radix</code></a></li>
<li><a href="https://doc.rust-lang.org/stable/std/num/struct.ParseIntError.html#method.kind"><code>std::num::ParseIntError::kind</code></a></li>
</ul>
<h3 id="other-changes"><a class="anchor" href="#other-changes" aria-hidden="true"></a>
Other changes</h3>
<p>Check out everything that changed in <a href="https://github.com/rust-lang/rust/releases/tag/1.82.0">Rust</a>, <a href="https://doc.rust-lang.org/nightly/cargo/CHANGELOG.html#cargo-182-2024-10-17">Cargo</a>, and <a href="https://github.com/rust-lang/rust-clippy/blob/master/CHANGELOG.md#rust-182">Clippy</a>.</p>
<h2 id="contributors-to-1-82-0"><a class="anchor" href="#contributors-to-1-82-0" aria-hidden="true"></a>
Contributors to 1.82.0</h2>
<p>Many people came together to create Rust 1.82.0. We couldn't have done it without all of you. <a href="https://thanks.rust-lang.org/rust/1.82.0/">Thanks!</a></p>

    </div>
  </div>
</section>
    <footer class="footer">
      <div class="w-100 mw-none ph3 mw8-m mw9-l center f3">
        <div class="row">
          <div class="four columns mt3 mt0-l" id="get-help">
            <h4>Get help!</h4>
            <ul>
              <li><a href="https://doc.rust-lang.org" target="_blank" rel="noopener">Documentation</a></li>
              <li><a href="mailto:core-team@rust-lang.org">Contact the Rust Team</a></li>
            </ul>
          </div>
          <div class="four columns mt3 mt0-l">
            <h4>Terms and policies</h4>
            <ul>
              <li><a href="https://www.rust-lang.org/policies/code-of-conduct">Code of Conduct</a></li>
              <li><a href="https://www.rust-lang.org/policies/licenses">Licenses</a></li>
              <li><a href="https://www.rust-lang.org/policies/media-guide">Logo Policy and Media Guide</a></li>
              <li><a href="https://www.rust-lang.org/policies/security">Security Disclosures</a></li>
              <li><a href="https://www.rust-lang.org/policies">All Policies</a></li>
            </ul>
          </div>
          <div class="four columns mt3 mt0-l">
            <h4>Social</h4>
            <div class="flex flex-row flex-wrap">
              <a rel="me" href="https://social.rust-lang.org/@rust" target="_blank" rel="noopener" alt="mastodon link"><img src="https://blog.rust-lang.org/images/mastodon.svg" alt="mastodon logo" title="Mastodon"/></a>
              <a rel="me" href="https://bsky.app/profile/rust-lang.org" target="_blank" rel="noopener" alt="Bluesky link"><img src="https://blog.rust-lang.org/images/bluesky.svg" alt="Bluesky logo" title="Bluesky"/></a>
              <a href="https://www.youtube.com/channel/UCaYhcUwRBNscFNUKTjgPFiA" target="_blank" rel="noopener" alt="youtube link"><img style="padding-top: 6px; padding-bottom:6px" src="https://blog.rust-lang.org/images/youtube.svg" alt="youtube logo" title="YouTube"/></a>
              <a href="https://discord.gg/rust-lang" target="_blank" rel="noopener" alt="discord link"><img src="https://blog.rust-lang.org/images/discord.svg" alt="discord logo" title="Discord"/></a>
              <a href="https://github.com/rust-lang" target="_blank" rel="noopener" alt="github link"><img src="https://blog.rust-lang.org/images/github.svg" alt="github logo" title="GitHub"/></a>
            </div>
            <h4 class="mt4 mb3">RSS</h4>
            <ul>
              <li><a href="https://blog.rust-lang.org/feed.xml">Main Blog</a></li>
              <li><a href="https://blog.rust-lang.org/inside-rust/feed.xml">"Inside Rust" Blog</a></li>
            </ul>
          </div>
    
        </div>
        <div class="attribution">
          Maintained by the Rust Team. See a typo?
          <a href="https://github.com/rust-lang/blog.rust-lang.org/edit/master/content/Rust-1.82.0.md" target="_blank" rel="noopener">Send a fix here</a>!
        </div>
      </div>
    </footer>
  </body>
</html>
